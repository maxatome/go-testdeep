<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.58.3" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Smuggle :: My New Hugo Site</title>

    
    <link href="/css/nucleus.css?1572645552" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1572645552" rel="stylesheet">
    <link href="/css/hybrid.css?1572645552" rel="stylesheet">
    <link href="/css/featherlight.min.css?1572645552" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1572645552" rel="stylesheet">
    <link href="/css/auto-complete.css?1572645552" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1572645552" rel="stylesheet">
    <link href="/css/theme.css?1572645552" rel="stylesheet">
    <link href="/css/hugo-theme.css?1572645552" rel="stylesheet">
    
      <link href="/css/theme-green.css?1572645552" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1572645552"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/operators/smuggle/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://go-testdeep.zetta.rocks"><img src="https://go-testdeep.zetta.rocks/images/logo.svg" /></a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1572645552"></script>
<script type="text/javascript" src="/js/auto-complete.js?1572645552"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/go-testdeep.zetta.rocks";
    
</script>
<script type="text/javascript" src="/js/search.js?1572645552"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/introduction/">
          Introduction
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example/" title="Example" class="dd-item 
        
        
        
        ">
      <a href="/example/">
          Example
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/example/using-testing/" title="Using testing package" class="dd-item ">
        <a href="/example/using-testing/">
        Using testing package
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/example/basic-testdeep/" title="Basic testdeep approach" class="dd-item ">
        <a href="/example/basic-testdeep/">
        Basic testdeep approach
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/example/advanced-testdeep/" title="Advanced testdeep technique" class="dd-item ">
        <a href="/example/advanced-testdeep/">
        Advanced testdeep technique
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/example/testdeep-cmp-shortcuts/" title="testdeep Cmp shortcuts" class="dd-item ">
        <a href="/example/testdeep-cmp-shortcuts/">
        testdeep Cmp shortcuts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/example/testdeep-t/" title="testdeep.T type" class="dd-item ">
        <a href="/example/testdeep-t/">
        testdeep.T type
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/functions/" title="Functions" class="dd-item 
        
        
        
        ">
      <a href="/functions/">
          Functions
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/functions/testdeep-t/" title="testdeep.T" class="dd-item ">
        <a href="/functions/testdeep-t/">
        testdeep.T
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/operators/" title="Operators" class="dd-item 
        parent
        
        
        ">
      <a href="/operators/">
          Operators
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/operators/matrix/" title="Operators matrices" class="dd-item ">
        <a href="/operators/matrix/">
        Operators matrices
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/all/" title="All" class="dd-item ">
        <a href="/operators/all/">
        All
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/any/" title="Any" class="dd-item ">
        <a href="/operators/any/">
        Any
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/array/" title="Array" class="dd-item ">
        <a href="/operators/array/">
        Array
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/arrayeach/" title="ArrayEach" class="dd-item ">
        <a href="/operators/arrayeach/">
        ArrayEach
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/bag/" title="Bag" class="dd-item ">
        <a href="/operators/bag/">
        Bag
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/between/" title="Between" class="dd-item ">
        <a href="/operators/between/">
        Between
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/cap/" title="Cap" class="dd-item ">
        <a href="/operators/cap/">
        Cap
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/catch/" title="Catch" class="dd-item ">
        <a href="/operators/catch/">
        Catch
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/code/" title="Code" class="dd-item ">
        <a href="/operators/code/">
        Code
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/contains/" title="Contains" class="dd-item ">
        <a href="/operators/contains/">
        Contains
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/containskey/" title="ContainsKey" class="dd-item ">
        <a href="/operators/containskey/">
        ContainsKey
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/empty/" title="Empty" class="dd-item ">
        <a href="/operators/empty/">
        Empty
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/gt/" title="Gt" class="dd-item ">
        <a href="/operators/gt/">
        Gt
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/gte/" title="Gte" class="dd-item ">
        <a href="/operators/gte/">
        Gte
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/hasprefix/" title="HasPrefix" class="dd-item ">
        <a href="/operators/hasprefix/">
        HasPrefix
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/hassuffix/" title="HasSuffix" class="dd-item ">
        <a href="/operators/hassuffix/">
        HasSuffix
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/ignore/" title="Ignore" class="dd-item ">
        <a href="/operators/ignore/">
        Ignore
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/isa/" title="Isa" class="dd-item ">
        <a href="/operators/isa/">
        Isa
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/json/" title="JSON" class="dd-item ">
        <a href="/operators/json/">
        JSON
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/keys/" title="Keys" class="dd-item ">
        <a href="/operators/keys/">
        Keys
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/lax/" title="Lax" class="dd-item ">
        <a href="/operators/lax/">
        Lax
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/len/" title="Len" class="dd-item ">
        <a href="/operators/len/">
        Len
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/lt/" title="Lt" class="dd-item ">
        <a href="/operators/lt/">
        Lt
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/lte/" title="Lte" class="dd-item ">
        <a href="/operators/lte/">
        Lte
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/map/" title="Map" class="dd-item ">
        <a href="/operators/map/">
        Map
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/mapeach/" title="MapEach" class="dd-item ">
        <a href="/operators/mapeach/">
        MapEach
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/n/" title="N" class="dd-item ">
        <a href="/operators/n/">
        N
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/nan/" title="NaN" class="dd-item ">
        <a href="/operators/nan/">
        NaN
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/nil/" title="Nil" class="dd-item ">
        <a href="/operators/nil/">
        Nil
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/none/" title="None" class="dd-item ">
        <a href="/operators/none/">
        None
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/not/" title="Not" class="dd-item ">
        <a href="/operators/not/">
        Not
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/notany/" title="NotAny" class="dd-item ">
        <a href="/operators/notany/">
        NotAny
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/notempty/" title="NotEmpty" class="dd-item ">
        <a href="/operators/notempty/">
        NotEmpty
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/notnan/" title="NotNaN" class="dd-item ">
        <a href="/operators/notnan/">
        NotNaN
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/notnil/" title="NotNil" class="dd-item ">
        <a href="/operators/notnil/">
        NotNil
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/notzero/" title="NotZero" class="dd-item ">
        <a href="/operators/notzero/">
        NotZero
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/pptr/" title="PPtr" class="dd-item ">
        <a href="/operators/pptr/">
        PPtr
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/ptr/" title="Ptr" class="dd-item ">
        <a href="/operators/ptr/">
        Ptr
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/re/" title="Re" class="dd-item ">
        <a href="/operators/re/">
        Re
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/reall/" title="ReAll" class="dd-item ">
        <a href="/operators/reall/">
        ReAll
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/set/" title="Set" class="dd-item ">
        <a href="/operators/set/">
        Set
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/shallow/" title="Shallow" class="dd-item ">
        <a href="/operators/shallow/">
        Shallow
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/slice/" title="Slice" class="dd-item ">
        <a href="/operators/slice/">
        Slice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/smuggle/" title="Smuggle" class="dd-item active">
        <a href="/operators/smuggle/">
        Smuggle
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/string/" title="String" class="dd-item ">
        <a href="/operators/string/">
        String
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/struct/" title="Struct" class="dd-item ">
        <a href="/operators/struct/">
        Struct
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/subbagof/" title="SubBagOf" class="dd-item ">
        <a href="/operators/subbagof/">
        SubBagOf
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/submapof/" title="SubMapOf" class="dd-item ">
        <a href="/operators/submapof/">
        SubMapOf
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/subsetof/" title="SubSetOf" class="dd-item ">
        <a href="/operators/subsetof/">
        SubSetOf
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/superbagof/" title="SuperBagOf" class="dd-item ">
        <a href="/operators/superbagof/">
        SuperBagOf
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/supermapof/" title="SuperMapOf" class="dd-item ">
        <a href="/operators/supermapof/">
        SuperMapOf
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/supersetof/" title="SuperSetOf" class="dd-item ">
        <a href="/operators/supersetof/">
        SuperSetOf
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/tag/" title="Tag" class="dd-item ">
        <a href="/operators/tag/">
        Tag
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/trunctime/" title="TruncTime" class="dd-item ">
        <a href="/operators/trunctime/">
        TruncTime
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/values/" title="Values" class="dd-item ">
        <a href="/operators/values/">
        Values
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/operators/zero/" title="Zero" class="dd-item ">
        <a href="/operators/zero/">
        Zero
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/faq/" title="FAQ" class="dd-item 
        
        
        
        ">
      <a href="/faq/">
          FAQ
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/maxatome/go-testdeep"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://godoc.org/github.com/maxatome/go-testdeep"><i class='fas fa-book'></i> godoc</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>go-testdeep</a> > <a href='/operators/'>Operators</a> > Smuggle
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#examples">Examples</a></li>
</ul></li>
<li><a href="#cmpsmuggle-shortcut">CmpSmuggle shortcut</a>
<ul>
<li><a href="#examples-1">Examples</a></li>
</ul></li>
<li><a href="#t-smuggle-shortcut">T.Smuggle shortcut</a>
<ul>
<li><a href="#examples-2">Examples</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Smuggle
            </h1>
          

        





<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">Smuggle</span>(fn <span style="color:#6ab825;font-weight:bold">interface</span>{}, expectedValue <span style="color:#6ab825;font-weight:bold">interface</span>{}) TestDeep</code></pre></div>
<p><a href="/operators/smuggle/"><code>Smuggle</code></a> operator allows to change data contents or mutate it into
another type before stepping down in favor of generic comparison
process. Of course it is a <a href="/operators/#smuggler-operators">smuggler operator</a>. So <em>fn</em> is a function
that must take one parameter whose type must be convertible to the
type of the compared value (as a convenient shortcut, <em>fn</em> can be a
<code>string</code> specifying a fields-path through structs, see below for
details).</p>

<p><em>fn</em> must return at least one value. These value will be compared as is
to <em>expectedValue</em>, here integer 28:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (value <span style="color:#6ab825;font-weight:bold">string</span>) <span style="color:#6ab825;font-weight:bold">int</span> {
    num, _ := strconv.<span style="color:#447fcf">Atoi</span>(value)
    <span style="color:#6ab825;font-weight:bold">return</span> num
  },
  <span style="color:#3677a9">28</span>)</code></pre></div>
<p>or using an other <a href="/operators/">TestDeep operator</a>, here <a href="/operators/between/"><code>Between(28, 30)</code></a>:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (value <span style="color:#6ab825;font-weight:bold">string</span>) <span style="color:#6ab825;font-weight:bold">int</span> {
    num, _ := strconv.<span style="color:#447fcf">Atoi</span>(value)
    <span style="color:#6ab825;font-weight:bold">return</span> num
  },
  <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">28</span>, <span style="color:#3677a9">30</span>))</code></pre></div>
<p><em>fn</em> can return a second boolean value, used to tell that a problem
occurred and so stop the comparison:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (value <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>) {
    num, err := strconv.<span style="color:#447fcf">Atoi</span>(value)
    <span style="color:#6ab825;font-weight:bold">return</span> num, err == <span style="color:#6ab825;font-weight:bold">nil</span>
  },
  <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">28</span>, <span style="color:#3677a9">30</span>))</code></pre></div>
<p><em>fn</em> can return a third <code>string</code> value which is used to describe the
test when a problem occurred (false second boolean value):</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (value <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>, <span style="color:#6ab825;font-weight:bold">string</span>) {
    num, err := strconv.<span style="color:#447fcf">Atoi</span>(value)
    <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
      <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, <span style="color:#6ab825;font-weight:bold">false</span>, <span style="color:#ed9d13">&#34;string must contain a number&#34;</span>
    }
    <span style="color:#6ab825;font-weight:bold">return</span> num, <span style="color:#6ab825;font-weight:bold">true</span>, <span style="color:#ed9d13">&#34;&#34;</span>
  },
  <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">28</span>, <span style="color:#3677a9">30</span>))</code></pre></div>
<p>Instead of returning (X, <code>bool</code>) or (X, <code>bool</code>, <code>string</code>), <em>fn</em> can
return (X, <a href="https://golang.org/pkg/builtin/#error"><code>error</code></a>). When a problem occurs, the returned <a href="https://golang.org/pkg/builtin/#error"><code>error</code></a> is
non-<code>nil</code>, as in:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (value <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
    num, err := strconv.<span style="color:#447fcf">Atoi</span>(value)
    <span style="color:#6ab825;font-weight:bold">return</span> num, err
  },
  <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">28</span>, <span style="color:#3677a9">30</span>))</code></pre></div>
<p>Which can be simplified to:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(strconv.Atoi, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">28</span>, <span style="color:#3677a9">30</span>))</code></pre></div>
<p>Imagine you want to compare that the Year of a date is between 2010
and 2020:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (date time.Time) <span style="color:#6ab825;font-weight:bold">int</span> {
    <span style="color:#6ab825;font-weight:bold">return</span> date.<span style="color:#447fcf">Year</span>()
  },
  <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">2010</span>, <span style="color:#3677a9">2020</span>))</code></pre></div>
<p>In this case the data location forwarded to next test will be
something like &ldquo;DATA.MyTimeField<smuggled>&rdquo;, but you can act on it
too by returning a <a href="https://godoc.org/github.com/maxatome/go-testdeep#SmuggledGot">SmuggledGot</a> struct (by value or by address):</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (date time.Time) SmuggledGot {
    <span style="color:#6ab825;font-weight:bold">return</span> SmuggledGot{
      Name: <span style="color:#ed9d13">&#34;Year&#34;</span>,
      Got:  date.<span style="color:#447fcf">Year</span>(),
    }
  },
  <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">2010</span>, <span style="color:#3677a9">2020</span>))</code></pre></div>
<p>then the data location forwarded to next test will be something like
&ldquo;DATA.MyTimeField.Year&rdquo;. The &ldquo;.&rdquo;  between the current path (here
&ldquo;DATA.MyTimeField&rdquo;) and the returned Name &ldquo;Year&rdquo; is automatically
added when Name starts with a Letter.</p>

<p>Note that <a href="https://godoc.org/github.com/maxatome/go-testdeep#SmuggledGot">SmuggledGot</a> and <a href="https://godoc.org/github.com/maxatome/go-testdeep#SmuggledGot">*SmuggledGot</a> returns are treated equally,
and they are only used when <em>fn</em> has only one returned value or
when the second boolean returned value is true.</p>

<p>Of course, all cases can go together:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#999;font-style:italic">// Accepts a &#34;YYYY/mm/DD HH:MM:SS&#34; string to produce a time.Time and tests
</span><span style="color:#999;font-style:italic">// whether this date is contained between 2 hours before now and now.
</span><span style="color:#999;font-style:italic"></span><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (date <span style="color:#6ab825;font-weight:bold">string</span>) (*SmuggledGot, <span style="color:#6ab825;font-weight:bold">bool</span>, <span style="color:#6ab825;font-weight:bold">string</span>) {
    date, err := time.<span style="color:#447fcf">Parse</span>(<span style="color:#ed9d13">&#34;2006/01/02 15:04:05&#34;</span>, date)
    <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
      <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#6ab825;font-weight:bold">nil</span>, <span style="color:#6ab825;font-weight:bold">false</span>, <span style="color:#ed9d13">`date must conform to &#34;YYYY/mm/DD HH:MM:SS&#34; format`</span>
    }
    <span style="color:#6ab825;font-weight:bold">return</span> &amp;SmuggledGot{
      Name: <span style="color:#ed9d13">&#34;Date&#34;</span>,
      Got:  date,
    }, <span style="color:#6ab825;font-weight:bold">true</span>, <span style="color:#ed9d13">&#34;&#34;</span>
  },
  <span style="color:#447fcf">Between</span>(time.<span style="color:#447fcf">Now</span>().<span style="color:#447fcf">Add</span>(-<span style="color:#3677a9">2</span>*time.Hour), time.<span style="color:#447fcf">Now</span>()))</code></pre></div>
<p>or:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#999;font-style:italic">// Accepts a &#34;YYYY/mm/DD HH:MM:SS&#34; string to produce a time.Time and tests
</span><span style="color:#999;font-style:italic">// whether this date is contained between 2 hours before now and now.
</span><span style="color:#999;font-style:italic"></span><span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (date <span style="color:#6ab825;font-weight:bold">string</span>) (*SmuggledGot, <span style="color:#6ab825;font-weight:bold">error</span>) {
    date, err := time.<span style="color:#447fcf">Parse</span>(<span style="color:#ed9d13">&#34;2006/01/02 15:04:05&#34;</span>, date)
    <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
      <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#6ab825;font-weight:bold">nil</span>, err
    }
    <span style="color:#6ab825;font-weight:bold">return</span> &amp;SmuggledGot{
      Name: <span style="color:#ed9d13">&#34;Date&#34;</span>,
      Got:  date,
    }, <span style="color:#6ab825;font-weight:bold">nil</span>
  },
  <span style="color:#447fcf">Between</span>(time.<span style="color:#447fcf">Now</span>().<span style="color:#447fcf">Add</span>(-<span style="color:#3677a9">2</span>*time.Hour), time.<span style="color:#447fcf">Now</span>()))</code></pre></div>
<p><a href="/operators/smuggle/"><code>Smuggle</code></a> can also be used to access a struct field embedded in
several struct layers.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">type</span> A <span style="color:#6ab825;font-weight:bold">struct</span> { Num <span style="color:#6ab825;font-weight:bold">int</span> }
<span style="color:#6ab825;font-weight:bold">type</span> B <span style="color:#6ab825;font-weight:bold">struct</span> { A *A }
<span style="color:#6ab825;font-weight:bold">type</span> C <span style="color:#6ab825;font-weight:bold">struct</span> { B B }
got := C{B: B{A: &amp;A{Num: <span style="color:#3677a9">12</span>}}}

<span style="color:#999;font-style:italic">// Tests that got.B.A.Num is 12
</span><span style="color:#999;font-style:italic"></span><span style="color:#447fcf">Cmp</span>(t, got,
  <span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span> (c C) <span style="color:#6ab825;font-weight:bold">int</span> {
      <span style="color:#6ab825;font-weight:bold">return</span> c.B.A.Num
    },
    <span style="color:#3677a9">12</span>))</code></pre></div>
<p>As brought up above, a field-path can be passed as <em>fn</em> value
instead of a function pointer. Using this feature, the Cmp
call in the above example can be rewritten as follows:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#999;font-style:italic">// Tests that got.B.A.Num is 12
</span><span style="color:#999;font-style:italic"></span><span style="color:#447fcf">Cmp</span>(t, got, <span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;B.A.Num&#34;</span>, <span style="color:#3677a9">12</span>))</code></pre></div>
<p>Behind the scenes, a temporary function is automatically created to
achieve the same goal, but add some checks against <code>nil</code> values and
auto-dereference interfaces and pointers.</p>

<p>The difference between <a href="/operators/smuggle/"><code>Smuggle</code></a> and <a href="/operators/code/"><code>Code</code></a> operators is that <a href="/operators/code/"><code>Code</code></a> is
used to do a final comparison while <a href="/operators/smuggle/"><code>Smuggle</code></a> transforms the data and
then steps down in favor of generic comparison process. Moreover,
the type accepted as input for the function is more lax to
facilitate the tests writing (eg. the function can accept a <code>float64</code>
and the got value be an <code>int</code>). See examples. On the other hand, the
output type is strict and must match exactly the expected value
type. The fields-path <code>string</code> <em>fn</em> shortcut is not available with
<a href="/operators/code/"><code>Code</code></a> operator.</p>

<p><a href="/operators/#typebehind-method">TypeBehind</a> method returns the <a href="https://golang.org/pkg/reflect/#Type"><code>reflect.Type</code></a> of only parameter of
<em>fn</em>. For the case where <em>fn</em> is a fields-path, it is always
<code>interface{}</code>, as the type can not be known in advance.</p>

<blockquote>
<p>See also <a href="https://godoc.org/github.com/maxatome/go-testdeep#Smuggle"><i class='fas fa-book'></i> Smuggle godoc</a>.</p>
</blockquote>

<h3 id="examples">Examples</h3>

<p>
<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Convert example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	got := <span style="color:#24909d">int64</span>(<span style="color:#3677a9">123</span>)

	ok := <span style="color:#447fcf">Cmp</span>(t, got,
		<span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span>(n <span style="color:#6ab825;font-weight:bold">int64</span>) <span style="color:#6ab825;font-weight:bold">int</span> { <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#24909d">int</span>(n) }, <span style="color:#3677a9">123</span>),
		<span style="color:#ed9d13">&#34;checks int64 got against an int value&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = <span style="color:#447fcf">Cmp</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>,
		<span style="color:#447fcf">Smuggle</span>(
			<span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>) {
				n, err := strconv.<span style="color:#447fcf">Atoi</span>(numStr)
				<span style="color:#6ab825;font-weight:bold">return</span> n, err == <span style="color:#6ab825;font-weight:bold">nil</span>
			},
			<span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>)),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = <span style="color:#447fcf">Cmp</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>,
		<span style="color:#447fcf">Smuggle</span>(
			<span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>, <span style="color:#6ab825;font-weight:bold">string</span>) {
				n, err := strconv.<span style="color:#447fcf">Atoi</span>(numStr)
				<span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
					<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, <span style="color:#6ab825;font-weight:bold">false</span>, <span style="color:#ed9d13">&#34;string must contain a number&#34;</span>
				}
				<span style="color:#6ab825;font-weight:bold">return</span> n, <span style="color:#6ab825;font-weight:bold">true</span>, <span style="color:#ed9d13">&#34;&#34;</span>
			},
			<span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>)),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = <span style="color:#447fcf">Cmp</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>,
		<span style="color:#447fcf">Smuggle</span>(
			<span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
				<span style="color:#6ab825;font-weight:bold">return</span> strconv.<span style="color:#447fcf">Atoi</span>(numStr)
			},
			<span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>)),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	<span style="color:#999;font-style:italic">// Short version :)
</span><span style="color:#999;font-style:italic"></span>	ok = <span style="color:#447fcf">Cmp</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>,
		<span style="color:#447fcf">Smuggle</span>(strconv.Atoi, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>)),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	// <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Lax example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#999;font-style:italic">// got is an int16 and Smuggle func input is an int64: it is OK
</span><span style="color:#999;font-style:italic"></span>	got := <span style="color:#24909d">int</span>(<span style="color:#3677a9">123</span>)

	ok := <span style="color:#447fcf">Cmp</span>(t, got,
		<span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span>(n <span style="color:#6ab825;font-weight:bold">int64</span>) <span style="color:#6ab825;font-weight:bold">uint32</span> { <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#24909d">uint32</span>(n) }, <span style="color:#24909d">uint32</span>(<span style="color:#3677a9">123</span>)))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;got int16(123) → smuggle via int64 → uint32(123):&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	// got <span style="color:#24909d">int16</span>(<span style="color:#3677a9">123</span>) <span style="color:#a61717;background-color:#e3d2d2">→</span> smuggle via <span style="color:#6ab825;font-weight:bold">int64</span> <span style="color:#a61717;background-color:#e3d2d2">→</span> <span style="color:#24909d">uint32</span>(<span style="color:#3677a9">123</span>): <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Auto_unmarshal example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#999;font-style:italic">// Automatically json.Unmarshal to compare
</span><span style="color:#999;font-style:italic"></span>	got := []<span style="color:#24909d">byte</span>(<span style="color:#ed9d13">`{&#34;a&#34;:1,&#34;b&#34;:2}`</span>)

	ok := <span style="color:#447fcf">Cmp</span>(t, got,
		<span style="color:#447fcf">Smuggle</span>(
			<span style="color:#6ab825;font-weight:bold">func</span>(b json.RawMessage) (r <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">int</span>, err <span style="color:#6ab825;font-weight:bold">error</span>) {
				err = json.<span style="color:#447fcf">Unmarshal</span>(b, &amp;r)
				<span style="color:#6ab825;font-weight:bold">return</span>
			},
			<span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">int</span>{
				<span style="color:#ed9d13">&#34;a&#34;</span>: <span style="color:#3677a9">1</span>,
				<span style="color:#ed9d13">&#34;b&#34;</span>: <span style="color:#3677a9">2</span>,
			}))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;JSON contents is OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	// JSON contents is OK: <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Complex example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#999;font-style:italic">// No end date but a start date and a duration
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#6ab825;font-weight:bold">type</span> StartDuration <span style="color:#6ab825;font-weight:bold">struct</span> {
		StartDate time.Time
		Duration  time.Duration
	}

	<span style="color:#999;font-style:italic">// Checks that end date is between 17th and 19th February both at 0h
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// for each of these durations in hours
</span><span style="color:#999;font-style:italic"></span>
	<span style="color:#6ab825;font-weight:bold">for</span> _, duration := <span style="color:#6ab825;font-weight:bold">range</span> []time.Duration{<span style="color:#3677a9">48</span>, <span style="color:#3677a9">72</span>, <span style="color:#3677a9">96</span>} {
		got := StartDuration{
			StartDate: time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">14</span>, <span style="color:#3677a9">12</span>, <span style="color:#3677a9">13</span>, <span style="color:#3677a9">14</span>, <span style="color:#3677a9">0</span>, time.UTC),
			Duration:  duration * time.Hour,
		}

		<span style="color:#999;font-style:italic">// Simplest way, but in case of Between() failure, error will be bound
</span><span style="color:#999;font-style:italic"></span>		<span style="color:#999;font-style:italic">// to DATA&lt;smuggled&gt;, not very clear...
</span><span style="color:#999;font-style:italic"></span>		ok := <span style="color:#447fcf">Cmp</span>(t, got,
			<span style="color:#447fcf">Smuggle</span>(
				<span style="color:#6ab825;font-weight:bold">func</span>(sd StartDuration) time.Time {
					<span style="color:#6ab825;font-weight:bold">return</span> sd.StartDate.<span style="color:#447fcf">Add</span>(sd.Duration)
				},
				<span style="color:#447fcf">Between</span>(
					time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">17</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC),
					time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">19</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC))))
		fmt.<span style="color:#447fcf">Println</span>(ok)

		<span style="color:#999;font-style:italic">// Name the computed value &#34;ComputedEndDate&#34; to render a Between() failure
</span><span style="color:#999;font-style:italic"></span>		<span style="color:#999;font-style:italic">// more understandable, so error will be bound to DATA.ComputedEndDate
</span><span style="color:#999;font-style:italic"></span>		ok = <span style="color:#447fcf">Cmp</span>(t, got,
			<span style="color:#447fcf">Smuggle</span>(
				<span style="color:#6ab825;font-weight:bold">func</span>(sd StartDuration) SmuggledGot {
					<span style="color:#6ab825;font-weight:bold">return</span> SmuggledGot{
						Name: <span style="color:#ed9d13">&#34;ComputedEndDate&#34;</span>,
						Got:  sd.StartDate.<span style="color:#447fcf">Add</span>(sd.Duration),
					}
				},
				<span style="color:#447fcf">Between</span>(
					time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">17</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC),
					time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">19</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC))))
		fmt.<span style="color:#447fcf">Println</span>(ok)
	}

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// false
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// false
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	// <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Interface example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	gotTime, err := time.<span style="color:#447fcf">Parse</span>(time.RFC3339, <span style="color:#ed9d13">&#34;2018-05-23T12:13:14Z&#34;</span>)
	<span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
		t.<span style="color:#447fcf">Fatal</span>(err)
	}

	<span style="color:#999;font-style:italic">// Do not check the struct itself, but its stringified form
</span><span style="color:#999;font-style:italic"></span>	ok := <span style="color:#447fcf">Cmp</span>(t, gotTime,
		<span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span>(s fmt.Stringer) <span style="color:#6ab825;font-weight:bold">string</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> s.<span style="color:#447fcf">String</span>()
		},
			<span style="color:#ed9d13">&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;stringified time.Time OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// If got does not implement the fmt.Stringer interface, it fails
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// without calling the Smuggle func
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#6ab825;font-weight:bold">type</span> MyTime time.Time
	ok = <span style="color:#447fcf">Cmp</span>(t, <span style="color:#447fcf">MyTime</span>(gotTime),
		<span style="color:#447fcf">Smuggle</span>(<span style="color:#6ab825;font-weight:bold">func</span>(s fmt.Stringer) <span style="color:#6ab825;font-weight:bold">string</span> {
			fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;Smuggle func called!&#34;</span>)
			<span style="color:#6ab825;font-weight:bold">return</span> s.<span style="color:#447fcf">String</span>()
		},
			<span style="color:#ed9d13">&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;stringified MyTime OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// stringified time.Time OK: true
</span><span style="color:#999;font-style:italic"></span>	// stringified MyTime OK: <span style="color:#6ab825;font-weight:bold">false</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Field_path example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#6ab825;font-weight:bold">type</span> Body <span style="color:#6ab825;font-weight:bold">struct</span> {
		Name  <span style="color:#6ab825;font-weight:bold">string</span>
		Value <span style="color:#6ab825;font-weight:bold">interface</span>{}
	}
	<span style="color:#6ab825;font-weight:bold">type</span> Request <span style="color:#6ab825;font-weight:bold">struct</span> {
		Body *Body
	}
	<span style="color:#6ab825;font-weight:bold">type</span> Transaction <span style="color:#6ab825;font-weight:bold">struct</span> {
		Request
	}
	<span style="color:#6ab825;font-weight:bold">type</span> ValueNum <span style="color:#6ab825;font-weight:bold">struct</span> {
		Num <span style="color:#6ab825;font-weight:bold">int</span>
	}

	got := &amp;Transaction{
		Request: Request{
			Body: &amp;Body{
				Name:  <span style="color:#ed9d13">&#34;test&#34;</span>,
				Value: &amp;ValueNum{Num: <span style="color:#3677a9">123</span>},
			},
		},
	}

	<span style="color:#999;font-style:italic">// Want to check whether Num is between 100 and 200?
</span><span style="color:#999;font-style:italic"></span>	ok := <span style="color:#447fcf">Cmp</span>(t, got,
		<span style="color:#447fcf">Smuggle</span>(
			<span style="color:#6ab825;font-weight:bold">func</span>(t *Transaction) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
				<span style="color:#6ab825;font-weight:bold">if</span> t.Request.Body == <span style="color:#6ab825;font-weight:bold">nil</span> ||
					t.Request.Body.Value == <span style="color:#6ab825;font-weight:bold">nil</span> {
					<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, errors.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;Request.Body or Request.Body.Value is nil&#34;</span>)
				}
				<span style="color:#6ab825;font-weight:bold">if</span> v, ok := t.Request.Body.Value.(*ValueNum); ok &amp;&amp; v != <span style="color:#6ab825;font-weight:bold">nil</span> {
					<span style="color:#6ab825;font-weight:bold">return</span> v.Num, <span style="color:#6ab825;font-weight:bold">nil</span>
				}
				<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, errors.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;Request.Body.Value isn&#39;t *ValueNum or nil&#34;</span>)
			},
			<span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>)))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num by hand:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Same, but automagically generated...
</span><span style="color:#999;font-style:italic"></span>	ok = <span style="color:#447fcf">Cmp</span>(t, got, <span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;Request.Body.Value.Num&#34;</span>, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>)))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num using a fields-path:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// And as Request is an anonymous field, can be simplified further
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// as it can be omitted
</span><span style="color:#999;font-style:italic"></span>	ok = <span style="color:#447fcf">Cmp</span>(t, got, <span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;Body.Value.Num&#34;</span>, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>)))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num using an other fields-path:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// check Num by hand: true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// check Num using a fields-path: true
</span><span style="color:#999;font-style:italic"></span>	// check Num using an other fields-path: <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div></p>

<h2 id="cmpsmuggle-shortcut">CmpSmuggle shortcut</h2>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">CmpSmuggle</span>(t TestingT, got <span style="color:#6ab825;font-weight:bold">interface</span>{}, fn <span style="color:#6ab825;font-weight:bold">interface</span>{}, expectedValue <span style="color:#6ab825;font-weight:bold">interface</span>{}, args ...<span style="color:#6ab825;font-weight:bold">interface</span>{}) <span style="color:#6ab825;font-weight:bold">bool</span></code></pre></div>
<p>CmpSmuggle is a shortcut for:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#447fcf">Cmp</span>(t, got, <span style="color:#447fcf">Smuggle</span>(fn, expectedValue), args...)</code></pre></div>
<p>See above for details.</p>

<p>Returns true if the test is OK, false if it fails.</p>

<p><em>args&hellip;</em> are optional and allow to name the test. This name is
used in case of failure to qualify the test. If <code>len(args) &gt; 1</code> and
the first item of <em>args</em> is a <code>string</code> and contains a &lsquo;%&rsquo; <code>rune</code> then
<a href="https://golang.org/pkg/fmt/#Fprintf"><code>fmt.Fprintf</code></a> is used to compose the name, else <em>args</em> are passed to
<a href="https://golang.org/pkg/fmt/#Fprint"><code>fmt.Fprint</code></a>. Do not forget it is the name of the test, not the
reason of a potential failure.</p>

<blockquote>
<p>See also <a href="https://godoc.org/github.com/maxatome/go-testdeep#CmpSmuggle"><i class='fas fa-book'></i> CmpSmuggle godoc</a>.</p>
</blockquote>

<h3 id="examples-1">Examples</h3>

<p>
<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Convert example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	got := <span style="color:#24909d">int64</span>(<span style="color:#3677a9">123</span>)

	ok := <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#6ab825;font-weight:bold">func</span>(n <span style="color:#6ab825;font-weight:bold">int64</span>) <span style="color:#6ab825;font-weight:bold">int</span> { <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#24909d">int</span>(n) }, <span style="color:#3677a9">123</span>,
		<span style="color:#ed9d13">&#34;checks int64 got against an int value&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>, <span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>) {
		n, err := strconv.<span style="color:#447fcf">Atoi</span>(numStr)
		<span style="color:#6ab825;font-weight:bold">return</span> n, err == <span style="color:#6ab825;font-weight:bold">nil</span>
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>, <span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>, <span style="color:#6ab825;font-weight:bold">string</span>) {
		n, err := strconv.<span style="color:#447fcf">Atoi</span>(numStr)
		<span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, <span style="color:#6ab825;font-weight:bold">false</span>, <span style="color:#ed9d13">&#34;string must contain a number&#34;</span>
		}
		<span style="color:#6ab825;font-weight:bold">return</span> n, <span style="color:#6ab825;font-weight:bold">true</span>, <span style="color:#ed9d13">&#34;&#34;</span>
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>, <span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
		<span style="color:#6ab825;font-weight:bold">return</span> strconv.<span style="color:#447fcf">Atoi</span>(numStr)
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	<span style="color:#999;font-style:italic">// Short version :)
</span><span style="color:#999;font-style:italic"></span>	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, <span style="color:#ed9d13">&#34;123&#34;</span>, strconv.Atoi, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	// <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Lax example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#999;font-style:italic">// got is an int16 and Smuggle func input is an int64: it is OK
</span><span style="color:#999;font-style:italic"></span>	got := <span style="color:#24909d">int</span>(<span style="color:#3677a9">123</span>)

	ok := <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#6ab825;font-weight:bold">func</span>(n <span style="color:#6ab825;font-weight:bold">int64</span>) <span style="color:#6ab825;font-weight:bold">uint32</span> { <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#24909d">uint32</span>(n) }, <span style="color:#24909d">uint32</span>(<span style="color:#3677a9">123</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;got int16(123) → smuggle via int64 → uint32(123):&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	// got <span style="color:#24909d">int16</span>(<span style="color:#3677a9">123</span>) <span style="color:#a61717;background-color:#e3d2d2">→</span> smuggle via <span style="color:#6ab825;font-weight:bold">int64</span> <span style="color:#a61717;background-color:#e3d2d2">→</span> <span style="color:#24909d">uint32</span>(<span style="color:#3677a9">123</span>): <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Auto_unmarshal example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#999;font-style:italic">// Automatically json.Unmarshal to compare
</span><span style="color:#999;font-style:italic"></span>	got := []<span style="color:#24909d">byte</span>(<span style="color:#ed9d13">`{&#34;a&#34;:1,&#34;b&#34;:2}`</span>)

	ok := <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#6ab825;font-weight:bold">func</span>(b json.RawMessage) (r <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">int</span>, err <span style="color:#6ab825;font-weight:bold">error</span>) {
		err = json.<span style="color:#447fcf">Unmarshal</span>(b, &amp;r)
		<span style="color:#6ab825;font-weight:bold">return</span>
	}, <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">int</span>{
		<span style="color:#ed9d13">&#34;a&#34;</span>: <span style="color:#3677a9">1</span>,
		<span style="color:#ed9d13">&#34;b&#34;</span>: <span style="color:#3677a9">2</span>,
	})
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;JSON contents is OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	// JSON contents is OK: <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Complex example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#999;font-style:italic">// No end date but a start date and a duration
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#6ab825;font-weight:bold">type</span> StartDuration <span style="color:#6ab825;font-weight:bold">struct</span> {
		StartDate time.Time
		Duration  time.Duration
	}

	<span style="color:#999;font-style:italic">// Checks that end date is between 17th and 19th February both at 0h
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// for each of these durations in hours
</span><span style="color:#999;font-style:italic"></span>
	<span style="color:#6ab825;font-weight:bold">for</span> _, duration := <span style="color:#6ab825;font-weight:bold">range</span> []time.Duration{<span style="color:#3677a9">48</span>, <span style="color:#3677a9">72</span>, <span style="color:#3677a9">96</span>} {
		got := StartDuration{
			StartDate: time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">14</span>, <span style="color:#3677a9">12</span>, <span style="color:#3677a9">13</span>, <span style="color:#3677a9">14</span>, <span style="color:#3677a9">0</span>, time.UTC),
			Duration:  duration * time.Hour,
		}

		<span style="color:#999;font-style:italic">// Simplest way, but in case of Between() failure, error will be bound
</span><span style="color:#999;font-style:italic"></span>		<span style="color:#999;font-style:italic">// to DATA&lt;smuggled&gt;, not very clear...
</span><span style="color:#999;font-style:italic"></span>		ok := <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#6ab825;font-weight:bold">func</span>(sd StartDuration) time.Time {
			<span style="color:#6ab825;font-weight:bold">return</span> sd.StartDate.<span style="color:#447fcf">Add</span>(sd.Duration)
		}, <span style="color:#447fcf">Between</span>(
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">17</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC),
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">19</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC)))
		fmt.<span style="color:#447fcf">Println</span>(ok)

		<span style="color:#999;font-style:italic">// Name the computed value &#34;ComputedEndDate&#34; to render a Between() failure
</span><span style="color:#999;font-style:italic"></span>		<span style="color:#999;font-style:italic">// more understandable, so error will be bound to DATA.ComputedEndDate
</span><span style="color:#999;font-style:italic"></span>		ok = <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#6ab825;font-weight:bold">func</span>(sd StartDuration) SmuggledGot {
			<span style="color:#6ab825;font-weight:bold">return</span> SmuggledGot{
				Name: <span style="color:#ed9d13">&#34;ComputedEndDate&#34;</span>,
				Got:  sd.StartDate.<span style="color:#447fcf">Add</span>(sd.Duration),
			}
		}, <span style="color:#447fcf">Between</span>(
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">17</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC),
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">19</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC)))
		fmt.<span style="color:#447fcf">Println</span>(ok)
	}

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// false
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// false
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	// <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Interface example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	gotTime, err := time.<span style="color:#447fcf">Parse</span>(time.RFC3339, <span style="color:#ed9d13">&#34;2018-05-23T12:13:14Z&#34;</span>)
	<span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
		t.<span style="color:#447fcf">Fatal</span>(err)
	}

	<span style="color:#999;font-style:italic">// Do not check the struct itself, but its stringified form
</span><span style="color:#999;font-style:italic"></span>	ok := <span style="color:#447fcf">CmpSmuggle</span>(t, gotTime, <span style="color:#6ab825;font-weight:bold">func</span>(s fmt.Stringer) <span style="color:#6ab825;font-weight:bold">string</span> {
		<span style="color:#6ab825;font-weight:bold">return</span> s.<span style="color:#447fcf">String</span>()
	}, <span style="color:#ed9d13">&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;stringified time.Time OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// If got does not implement the fmt.Stringer interface, it fails
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// without calling the Smuggle func
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#6ab825;font-weight:bold">type</span> MyTime time.Time
	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, <span style="color:#447fcf">MyTime</span>(gotTime), <span style="color:#6ab825;font-weight:bold">func</span>(s fmt.Stringer) <span style="color:#6ab825;font-weight:bold">string</span> {
		fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;Smuggle func called!&#34;</span>)
		<span style="color:#6ab825;font-weight:bold">return</span> s.<span style="color:#447fcf">String</span>()
	}, <span style="color:#ed9d13">&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;stringified MyTime OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// stringified time.Time OK: true
</span><span style="color:#999;font-style:italic"></span>	// stringified MyTime OK: <span style="color:#6ab825;font-weight:bold">false</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Field_path example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := &amp;testing.T{}

	<span style="color:#6ab825;font-weight:bold">type</span> Body <span style="color:#6ab825;font-weight:bold">struct</span> {
		Name  <span style="color:#6ab825;font-weight:bold">string</span>
		Value <span style="color:#6ab825;font-weight:bold">interface</span>{}
	}
	<span style="color:#6ab825;font-weight:bold">type</span> Request <span style="color:#6ab825;font-weight:bold">struct</span> {
		Body *Body
	}
	<span style="color:#6ab825;font-weight:bold">type</span> Transaction <span style="color:#6ab825;font-weight:bold">struct</span> {
		Request
	}
	<span style="color:#6ab825;font-weight:bold">type</span> ValueNum <span style="color:#6ab825;font-weight:bold">struct</span> {
		Num <span style="color:#6ab825;font-weight:bold">int</span>
	}

	got := &amp;Transaction{
		Request: Request{
			Body: &amp;Body{
				Name:  <span style="color:#ed9d13">&#34;test&#34;</span>,
				Value: &amp;ValueNum{Num: <span style="color:#3677a9">123</span>},
			},
		},
	}

	<span style="color:#999;font-style:italic">// Want to check whether Num is between 100 and 200?
</span><span style="color:#999;font-style:italic"></span>	ok := <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#6ab825;font-weight:bold">func</span>(t *Transaction) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
		<span style="color:#6ab825;font-weight:bold">if</span> t.Request.Body == <span style="color:#6ab825;font-weight:bold">nil</span> ||
			t.Request.Body.Value == <span style="color:#6ab825;font-weight:bold">nil</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, errors.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;Request.Body or Request.Body.Value is nil&#34;</span>)
		}
		<span style="color:#6ab825;font-weight:bold">if</span> v, ok := t.Request.Body.Value.(*ValueNum); ok &amp;&amp; v != <span style="color:#6ab825;font-weight:bold">nil</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> v.Num, <span style="color:#6ab825;font-weight:bold">nil</span>
		}
		<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, errors.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;Request.Body.Value isn&#39;t *ValueNum or nil&#34;</span>)
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num by hand:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Same, but automagically generated...
</span><span style="color:#999;font-style:italic"></span>	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#ed9d13">&#34;Request.Body.Value.Num&#34;</span>, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num using a fields-path:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// And as Request is an anonymous field, can be simplified further
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// as it can be omitted
</span><span style="color:#999;font-style:italic"></span>	ok = <span style="color:#447fcf">CmpSmuggle</span>(t, got, <span style="color:#ed9d13">&#34;Body.Value.Num&#34;</span>, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num using an other fields-path:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// check Num by hand: true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// check Num using a fields-path: true
</span><span style="color:#999;font-style:italic"></span>	// check Num using an other fields-path: <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div></p>

<h2 id="t-smuggle-shortcut">T.Smuggle shortcut</h2>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">func</span> (t *T) <span style="color:#447fcf">Smuggle</span>(got <span style="color:#6ab825;font-weight:bold">interface</span>{}, fn <span style="color:#6ab825;font-weight:bold">interface</span>{}, expectedValue <span style="color:#6ab825;font-weight:bold">interface</span>{}, args ...<span style="color:#6ab825;font-weight:bold">interface</span>{}) <span style="color:#6ab825;font-weight:bold">bool</span></code></pre></div>
<p><a href="/operators/smuggle/"><code>Smuggle</code></a> is a shortcut for:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">t.<span style="color:#447fcf">Cmp</span>(got, <span style="color:#447fcf">Smuggle</span>(fn, expectedValue), args...)</code></pre></div>
<p>See above for details.</p>

<p>Returns true if the test is OK, false if it fails.</p>

<p><em>args&hellip;</em> are optional and allow to name the test. This name is
used in case of failure to qualify the test. If <code>len(args) &gt; 1</code> and
the first item of <em>args</em> is a <code>string</code> and contains a &lsquo;%&rsquo; <code>rune</code> then
<a href="https://golang.org/pkg/fmt/#Fprintf"><code>fmt.Fprintf</code></a> is used to compose the name, else <em>args</em> are passed to
<a href="https://golang.org/pkg/fmt/#Fprint"><code>fmt.Fprint</code></a>. Do not forget it is the name of the test, not the
reason of a potential failure.</p>

<blockquote>
<p>See also <a href="https://godoc.org/github.com/maxatome/go-testdeep#T.Smuggle"><i class='fas fa-book'></i> T.Smuggle godoc</a>.</p>
</blockquote>

<h3 id="examples-2">Examples</h3>

<p>
<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Convert example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := <span style="color:#447fcf">NewT</span>(&amp;testing.T{})

	got := <span style="color:#24909d">int64</span>(<span style="color:#3677a9">123</span>)

	ok := t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#6ab825;font-weight:bold">func</span>(n <span style="color:#6ab825;font-weight:bold">int64</span>) <span style="color:#6ab825;font-weight:bold">int</span> { <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#24909d">int</span>(n) }, <span style="color:#3677a9">123</span>,
		<span style="color:#ed9d13">&#34;checks int64 got against an int value&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = t.<span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;123&#34;</span>, <span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>) {
		n, err := strconv.<span style="color:#447fcf">Atoi</span>(numStr)
		<span style="color:#6ab825;font-weight:bold">return</span> n, err == <span style="color:#6ab825;font-weight:bold">nil</span>
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = t.<span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;123&#34;</span>, <span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">bool</span>, <span style="color:#6ab825;font-weight:bold">string</span>) {
		n, err := strconv.<span style="color:#447fcf">Atoi</span>(numStr)
		<span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, <span style="color:#6ab825;font-weight:bold">false</span>, <span style="color:#ed9d13">&#34;string must contain a number&#34;</span>
		}
		<span style="color:#6ab825;font-weight:bold">return</span> n, <span style="color:#6ab825;font-weight:bold">true</span>, <span style="color:#ed9d13">&#34;&#34;</span>
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	ok = t.<span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;123&#34;</span>, <span style="color:#6ab825;font-weight:bold">func</span>(numStr <span style="color:#6ab825;font-weight:bold">string</span>) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
		<span style="color:#6ab825;font-weight:bold">return</span> strconv.<span style="color:#447fcf">Atoi</span>(numStr)
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	<span style="color:#999;font-style:italic">// Short version :)
</span><span style="color:#999;font-style:italic"></span>	ok = t.<span style="color:#447fcf">Smuggle</span>(<span style="color:#ed9d13">&#34;123&#34;</span>, strconv.Atoi, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">120</span>, <span style="color:#3677a9">130</span>),
		<span style="color:#ed9d13">&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	// <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Lax example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := <span style="color:#447fcf">NewT</span>(&amp;testing.T{})

	<span style="color:#999;font-style:italic">// got is an int16 and Smuggle func input is an int64: it is OK
</span><span style="color:#999;font-style:italic"></span>	got := <span style="color:#24909d">int</span>(<span style="color:#3677a9">123</span>)

	ok := t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#6ab825;font-weight:bold">func</span>(n <span style="color:#6ab825;font-weight:bold">int64</span>) <span style="color:#6ab825;font-weight:bold">uint32</span> { <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#24909d">uint32</span>(n) }, <span style="color:#24909d">uint32</span>(<span style="color:#3677a9">123</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;got int16(123) → smuggle via int64 → uint32(123):&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	// got <span style="color:#24909d">int16</span>(<span style="color:#3677a9">123</span>) <span style="color:#a61717;background-color:#e3d2d2">→</span> smuggle via <span style="color:#6ab825;font-weight:bold">int64</span> <span style="color:#a61717;background-color:#e3d2d2">→</span> <span style="color:#24909d">uint32</span>(<span style="color:#3677a9">123</span>): <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Auto_unmarshal example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := <span style="color:#447fcf">NewT</span>(&amp;testing.T{})

	<span style="color:#999;font-style:italic">// Automatically json.Unmarshal to compare
</span><span style="color:#999;font-style:italic"></span>	got := []<span style="color:#24909d">byte</span>(<span style="color:#ed9d13">`{&#34;a&#34;:1,&#34;b&#34;:2}`</span>)

	ok := t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#6ab825;font-weight:bold">func</span>(b json.RawMessage) (r <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">int</span>, err <span style="color:#6ab825;font-weight:bold">error</span>) {
		err = json.<span style="color:#447fcf">Unmarshal</span>(b, &amp;r)
		<span style="color:#6ab825;font-weight:bold">return</span>
	}, <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">int</span>{
		<span style="color:#ed9d13">&#34;a&#34;</span>: <span style="color:#3677a9">1</span>,
		<span style="color:#ed9d13">&#34;b&#34;</span>: <span style="color:#3677a9">2</span>,
	})
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;JSON contents is OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	// JSON contents is OK: <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Complex example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := <span style="color:#447fcf">NewT</span>(&amp;testing.T{})

	<span style="color:#999;font-style:italic">// No end date but a start date and a duration
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#6ab825;font-weight:bold">type</span> StartDuration <span style="color:#6ab825;font-weight:bold">struct</span> {
		StartDate time.Time
		Duration  time.Duration
	}

	<span style="color:#999;font-style:italic">// Checks that end date is between 17th and 19th February both at 0h
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// for each of these durations in hours
</span><span style="color:#999;font-style:italic"></span>
	<span style="color:#6ab825;font-weight:bold">for</span> _, duration := <span style="color:#6ab825;font-weight:bold">range</span> []time.Duration{<span style="color:#3677a9">48</span>, <span style="color:#3677a9">72</span>, <span style="color:#3677a9">96</span>} {
		got := StartDuration{
			StartDate: time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">14</span>, <span style="color:#3677a9">12</span>, <span style="color:#3677a9">13</span>, <span style="color:#3677a9">14</span>, <span style="color:#3677a9">0</span>, time.UTC),
			Duration:  duration * time.Hour,
		}

		<span style="color:#999;font-style:italic">// Simplest way, but in case of Between() failure, error will be bound
</span><span style="color:#999;font-style:italic"></span>		<span style="color:#999;font-style:italic">// to DATA&lt;smuggled&gt;, not very clear...
</span><span style="color:#999;font-style:italic"></span>		ok := t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#6ab825;font-weight:bold">func</span>(sd StartDuration) time.Time {
			<span style="color:#6ab825;font-weight:bold">return</span> sd.StartDate.<span style="color:#447fcf">Add</span>(sd.Duration)
		}, <span style="color:#447fcf">Between</span>(
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">17</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC),
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">19</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC)))
		fmt.<span style="color:#447fcf">Println</span>(ok)

		<span style="color:#999;font-style:italic">// Name the computed value &#34;ComputedEndDate&#34; to render a Between() failure
</span><span style="color:#999;font-style:italic"></span>		<span style="color:#999;font-style:italic">// more understandable, so error will be bound to DATA.ComputedEndDate
</span><span style="color:#999;font-style:italic"></span>		ok = t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#6ab825;font-weight:bold">func</span>(sd StartDuration) SmuggledGot {
			<span style="color:#6ab825;font-weight:bold">return</span> SmuggledGot{
				Name: <span style="color:#ed9d13">&#34;ComputedEndDate&#34;</span>,
				Got:  sd.StartDate.<span style="color:#447fcf">Add</span>(sd.Duration),
			}
		}, <span style="color:#447fcf">Between</span>(
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">17</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC),
			time.<span style="color:#447fcf">Date</span>(<span style="color:#3677a9">2018</span>, time.February, <span style="color:#3677a9">19</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, <span style="color:#3677a9">0</span>, time.UTC)))
		fmt.<span style="color:#447fcf">Println</span>(ok)
	}

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// false
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// false
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// true
</span><span style="color:#999;font-style:italic"></span>	// <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Interface example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := <span style="color:#447fcf">NewT</span>(&amp;testing.T{})

	gotTime, err := time.<span style="color:#447fcf">Parse</span>(time.RFC3339, <span style="color:#ed9d13">&#34;2018-05-23T12:13:14Z&#34;</span>)
	<span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
		t.<span style="color:#447fcf">Fatal</span>(err)
	}

	<span style="color:#999;font-style:italic">// Do not check the struct itself, but its stringified form
</span><span style="color:#999;font-style:italic"></span>	ok := t.<span style="color:#447fcf">Smuggle</span>(gotTime, <span style="color:#6ab825;font-weight:bold">func</span>(s fmt.Stringer) <span style="color:#6ab825;font-weight:bold">string</span> {
		<span style="color:#6ab825;font-weight:bold">return</span> s.<span style="color:#447fcf">String</span>()
	}, <span style="color:#ed9d13">&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;stringified time.Time OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// If got does not implement the fmt.Stringer interface, it fails
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// without calling the Smuggle func
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#6ab825;font-weight:bold">type</span> MyTime time.Time
	ok = t.<span style="color:#447fcf">Smuggle</span>(<span style="color:#447fcf">MyTime</span>(gotTime), <span style="color:#6ab825;font-weight:bold">func</span>(s fmt.Stringer) <span style="color:#6ab825;font-weight:bold">string</span> {
		fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;Smuggle func called!&#34;</span>)
		<span style="color:#6ab825;font-weight:bold">return</span> s.<span style="color:#447fcf">String</span>()
	}, <span style="color:#ed9d13">&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;stringified MyTime OK:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// stringified time.Time OK: true
</span><span style="color:#999;font-style:italic"></span>	// stringified MyTime OK: <span style="color:#6ab825;font-weight:bold">false</span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Field_path example
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	t := <span style="color:#447fcf">NewT</span>(&amp;testing.T{})

	<span style="color:#6ab825;font-weight:bold">type</span> Body <span style="color:#6ab825;font-weight:bold">struct</span> {
		Name  <span style="color:#6ab825;font-weight:bold">string</span>
		Value <span style="color:#6ab825;font-weight:bold">interface</span>{}
	}
	<span style="color:#6ab825;font-weight:bold">type</span> Request <span style="color:#6ab825;font-weight:bold">struct</span> {
		Body *Body
	}
	<span style="color:#6ab825;font-weight:bold">type</span> Transaction <span style="color:#6ab825;font-weight:bold">struct</span> {
		Request
	}
	<span style="color:#6ab825;font-weight:bold">type</span> ValueNum <span style="color:#6ab825;font-weight:bold">struct</span> {
		Num <span style="color:#6ab825;font-weight:bold">int</span>
	}

	got := &amp;Transaction{
		Request: Request{
			Body: &amp;Body{
				Name:  <span style="color:#ed9d13">&#34;test&#34;</span>,
				Value: &amp;ValueNum{Num: <span style="color:#3677a9">123</span>},
			},
		},
	}

	<span style="color:#999;font-style:italic">// Want to check whether Num is between 100 and 200?
</span><span style="color:#999;font-style:italic"></span>	ok := t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#6ab825;font-weight:bold">func</span>(t *Transaction) (<span style="color:#6ab825;font-weight:bold">int</span>, <span style="color:#6ab825;font-weight:bold">error</span>) {
		<span style="color:#6ab825;font-weight:bold">if</span> t.Request.Body == <span style="color:#6ab825;font-weight:bold">nil</span> ||
			t.Request.Body.Value == <span style="color:#6ab825;font-weight:bold">nil</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, errors.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;Request.Body or Request.Body.Value is nil&#34;</span>)
		}
		<span style="color:#6ab825;font-weight:bold">if</span> v, ok := t.Request.Body.Value.(*ValueNum); ok &amp;&amp; v != <span style="color:#6ab825;font-weight:bold">nil</span> {
			<span style="color:#6ab825;font-weight:bold">return</span> v.Num, <span style="color:#6ab825;font-weight:bold">nil</span>
		}
		<span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#3677a9">0</span>, errors.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;Request.Body.Value isn&#39;t *ValueNum or nil&#34;</span>)
	}, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num by hand:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Same, but automagically generated...
</span><span style="color:#999;font-style:italic"></span>	ok = t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#ed9d13">&#34;Request.Body.Value.Num&#34;</span>, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num using a fields-path:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// And as Request is an anonymous field, can be simplified further
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// as it can be omitted
</span><span style="color:#999;font-style:italic"></span>	ok = t.<span style="color:#447fcf">Smuggle</span>(got, <span style="color:#ed9d13">&#34;Body.Value.Num&#34;</span>, <span style="color:#447fcf">Between</span>(<span style="color:#3677a9">100</span>, <span style="color:#3677a9">200</span>))
	fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;check Num using an other fields-path:&#34;</span>, ok)

	<span style="color:#999;font-style:italic">// Output:
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// check Num by hand: true
</span><span style="color:#999;font-style:italic"></span>	<span style="color:#999;font-style:italic">// check Num using a fields-path: true
</span><span style="color:#999;font-style:italic"></span>	// check Num using an other fields-path: <span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
    </div>
</div></p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/operators/slice/" title="Slice"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/operators/string/" title="String" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1572645552"></script>
    <script src="/js/perfect-scrollbar.min.js?1572645552"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1572645552"></script>
    <script src="/js/jquery.sticky.js?1572645552"></script>
    <script src="/js/featherlight.min.js?1572645552"></script>
    <script src="/js/highlight.pack.js?1572645552"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1572645552"></script>
    <script src="/js/learn.js?1572645552"></script>
    <script src="/js/hugo-learn.js?1572645552"></script>

    <link href="/mermaid/mermaid.css?1572645552" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1572645552"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

